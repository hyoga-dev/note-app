(()=>{"use strict";const e=1.3;let t,o,l,n,r,a,s,c=3,i=document.getElementById("btn"),d=0,m=document.querySelector(".grab-container"),p=document.querySelectorAll(".box");document.getElementById("btn").addEventListener("mousedown",(function(){let t=setInterval((()=>{d++}),10);i.addEventListener("mousemove",(function o(){d>2&&(clearInterval(t),m.classList.remove("slide-left"),function(t){let o,l,n,r,a,s,i;localStorage.getItem("boxNum")>3&&(c=localStorage.getItem("boxNum")),console.log(c),c++,localStorage.setItem("boxNum",c);const d=document.createElement("div"),m=document.createTextNode(c);d.appendChild(m),d.classList.add("box"),d.style.opacity="0",d.style.zIndex="100",container.appendChild(d);let p=document.querySelectorAll(".box"),u=p.length-1,g=p[u];o=t.clientX,l=t.clientY;const y=parseInt(getComputedStyle(document.getElementById("btn")).getPropertyValue("top")),S=parseInt(getComputedStyle(document.getElementById("btn")).getPropertyValue("left"));function I(t){g.style.cursor="grabbing",g.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)",g.style.opacity="1",window.addEventListener("mouseup",x);let c=t.clientX-(o-n),i=t.clientY-(l-r);g.style.left=`${c}px`,g.style.top=`${i}px`,function(){if(s=t,a&&s){const t=1.5*Math.floor(s.screenX-a.screenX),o=-1.5*Math.floor(s.screenY-a.screenY);t<25&&t>-25&&o<25&&o>-25&&(g.style.transform=`rotateX(${o/e}deg) rotateY(${t/e}deg)`)}a=s}()}function x(){g.style.cursor="grab",g.style.boxShadow="none",g.style.transform="rotateX(0) rotateY(0)";const e=document.querySelector("#btn");e.style.backgroundColor="#f0f0f0",e.addEventListener("mouseenter",(()=>{e.style.backgroundColor="rgb(219, 224, 230)"})),e.addEventListener("mouseleave",(()=>{e.style.backgroundColor="#f0f0f0"})),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",x);const t=parseInt(getComputedStyle(g).getPropertyValue("top")),o=parseInt(getComputedStyle(g).getPropertyValue("left")),l=document.querySelector(".container"),n=parseInt(getComputedStyle(g).getPropertyValue("width")),r=parseInt(getComputedStyle(g).getPropertyValue("height")),a=parseInt(getComputedStyle(l).getPropertyValue("height")),s=parseInt(getComputedStyle(l).getPropertyValue("width"));return t<0&&o>s-n?(g.style.top="0",g.style.left=s-n+"px",localStorage.setItem("container",l.innerHTML),localStorage.setItem(`top${u}`,"0"),void localStorage.setItem(`left${u}`,s-n+"px")):t>a-r&&o<0?(g.style.top=a-r+"px",g.style.left="0",localStorage.setItem("container",l.innerHTML),localStorage.setItem(`top${u}`,a-r+"px"),void localStorage.setItem(`left${u}`,"0")):t>a-r&&o>s-n?(g.style.top=a-r+"px",g.style.left=s-n+"px",localStorage.setItem("container",l.innerHTML),localStorage.setItem(`top${u}`,a-r+"px"),void localStorage.setItem(`left${u}`,s-n+"px")):t<0&&o<0?(g.style.top="0",g.style.left="0",localStorage.setItem("container",l.innerHTML),localStorage.setItem(`top${u}`,"0"),void localStorage.setItem(`left${u}`,"0")):t<0?(g.style.top="0",localStorage.setItem("container",l.innerHTML),void localStorage.setItem(`top${u}`,"0")):o<0?(g.style.left="0",localStorage.setItem("container",l.innerHTML),void localStorage.setItem(`left${u}`,"0")):t>a-r?(g.style.top=a-r+"px",localStorage.setItem("container",l.innerHTML),void localStorage.setItem(`top${u}`,a-r+"px")):o>s-n?(g.style.left=s-n+"px",localStorage.setItem("container",l.innerHTML),void localStorage.setItem(`left${u}`,s-n+"px")):void localStorage.setItem("container",l.innerHTML)}g.style.left=S-100+"px",g.style.top=y-50+"px",n=Math.floor(g.getBoundingClientRect().left),r=Math.floor(g.getBoundingClientRect().top),function(){const e=t.clientX,o=t.clientY;g.style.left=e-100+"px",g.style.top=o-50+"px"}(),window.addEventListener("mousemove",I);for(let f=0;f<document.querySelectorAll(".box").length;f++){let v=document.querySelectorAll(".box")[f];function L(e){v=document.querySelectorAll(".box")[f];let t=parseInt(getComputedStyle(v).getPropertyValue("z-index"));o=e.clientX,l=e.clientY,i=[];for(let e=0;e<document.querySelectorAll(".box").length;e++)t=parseInt(getComputedStyle(document.querySelectorAll(".box")[e]).getPropertyValue("z-index")),i.push(t);let a=Math.max(...i);if(n=Math.floor(v.getBoundingClientRect().left),r=Math.floor(v.getBoundingClientRect().top),a<100)v.style.zIndex=a+1,localStorage.setItem(`index${f}`,a);else for(let e=0;e<document.querySelectorAll(".box").length;e++)localStorage.setItem(`index${e}`,localStorage.getItem(`index${e}`)-10),document.querySelectorAll(".box")[e].style.zIndex=localStorage.getItem(`index${e}`);v.style.cursor="grabbing",v.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)",window.addEventListener("mousemove",$),window.addEventListener("mouseup",b),document.getElementById("demo5").innerHTML="Arr : "+i}function $(t){v=document.querySelectorAll(".box")[f];let c=t.clientX-(o-n),i=t.clientY-(l-r);v.style.left=`${c}px`,v.style.top=`${i}px`,localStorage.setItem(`top${[f]}`,i+"px"),localStorage.setItem(`left${[f]}`,c+"px"),function(){if(s=t,a&&s){const t=1.5*Math.floor(s.screenX-a.screenX),o=-1.5*Math.floor(s.screenY-a.screenY);t<25&&t>-25&&o<25&&o>-25&&(v.style.transform=`rotateX(${o/e}deg) rotateY(${t/e}deg)`)}a=s}()}function b(){v=document.querySelectorAll(".box"),v=document.querySelectorAll(".box")[f],v.style.cursor="grab",v.style.boxShadow="none",v.style.transform="rotateX(0) rotateY(0)",window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",b);const e=parseInt(getComputedStyle(v).getPropertyValue("top")),t=parseInt(getComputedStyle(v).getPropertyValue("left")),o=document.querySelector(".container"),l=parseInt(getComputedStyle(v).getPropertyValue("width")),n=parseInt(getComputedStyle(v).getPropertyValue("height")),r=parseInt(getComputedStyle(o).getPropertyValue("height")),a=parseInt(getComputedStyle(o).getPropertyValue("width"));return e<0&&t>a-l?(v.style.top="0",v.style.left=a-l+"px",localStorage.setItem(`top${f}`,"0"),localStorage.setItem(`left${f}`,a-l+"px"),void localStorage.setItem("container",o.innerHTML)):e>r-n&&t<0?(v.style.top=r-n+"px",v.style.left="0",localStorage.setItem(`top${f}`,r-n+"px"),localStorage.setItem(`left${f}`,"0"),void localStorage.setItem("container",o.innerHTML)):e>r-n&&t>a-l?(v.style.top=r-n+"px",v.style.left=a-l+"px",localStorage.setItem(`top${f}`,r-n+"px"),localStorage.setItem(`left${f}`,a-l+"px"),void localStorage.setItem("container",o.innerHTML)):e<0&&t<0?(v.style.top="0",v.style.left="0",localStorage.setItem(`top${f}`,"0"),localStorage.setItem(`left${f}`,"0"),void localStorage.setItem("container",o.innerHTML)):e<0?(v.style.top="0",localStorage.setItem(`top${f}`,"0"),void localStorage.setItem("container",o.innerHTML)):t<0?(v.style.left="0",localStorage.setItem(`left${f}`,"0"),void localStorage.setItem("container",o.innerHTML)):e>r-n?(v.style.top=r-n+"px",localStorage.setItem(`top${f}`,r-n+"px"),void localStorage.setItem("container",o.innerHTML)):t>a-l?(v.style.left=a-l+"px",localStorage.setItem(`left${f}`,a-l+"px"),void localStorage.setItem("container",o.innerHTML)):void localStorage.setItem("container",o.innerHTML)}v.addEventListener("mousedown",L)}}(event),d=0,i.removeEventListener("mousemove",o))})),i.addEventListener("mouseup",(function(){function e(){m.classList.remove("slide-left"),window.removeEventListener("click",e)}m.classList.add("slide-left"),setTimeout((()=>{m.classList.remove("slide-left")}),5e3),setTimeout((()=>{window.addEventListener("click",e)}),0)})),window.addEventListener("mouseup",(function e(){clearInterval(t),d=0,window.removeEventListener("mouseup",e)}))})),function(){for(let e=0;e<p.length;e++){let c=document.querySelectorAll(".box")[e];function i(r){c=document.querySelectorAll(".box")[e];let a=parseInt(getComputedStyle(c).getPropertyValue("z-index"));t=r.clientX,o=r.clientY,s=[];for(let e=0;e<document.querySelectorAll(".box").length;e++)a=parseInt(getComputedStyle(document.querySelectorAll(".box")[e]).getPropertyValue("z-index")),s.push(a);let i=Math.max(...s);if(l=Math.floor(c.getBoundingClientRect().left),n=Math.floor(c.getBoundingClientRect().top),i<100)c.style.zIndex=i+1,localStorage.setItem(`index${e}`,i);else for(let e=0;e<document.querySelectorAll(".box").length;e++)localStorage.setItem(`index${e}`,localStorage.getItem(`index${e}`)-10),document.querySelectorAll(".box")[e].style.zIndex=localStorage.getItem(`index${e}`);c.style.cursor="grabbing",c.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)",window.addEventListener("mousemove",d),window.addEventListener("mouseup",m),document.getElementById("demo5").innerHTML="Arr : "+s}function d(s){c=document.querySelectorAll(".box")[e];const i=s.clientX-(t-l),d=s.clientY-(o-n);c.style.left=`${i}px`,c.style.top=`${d}px`,localStorage.setItem(`top${[e]}`,d+"px"),localStorage.setItem(`left${[e]}`,i+"px"),function(){if(a=s,r&&a){const e=1.5*Math.floor(a.screenX-r.screenX),t=-1.5*Math.floor(a.screenY-r.screenY);e<25&&e>-25&&t<25&&t>-25&&(c.style.transform=`rotateX(${t/1.3}deg) rotateY(${e/1.3}deg)`)}r=a}()}function m(){c=document.querySelectorAll(".box");let t=getComputedStyle(c[0]).getPropertyValue("z-index"),o=getComputedStyle(c[1]).getPropertyValue("z-index"),l=getComputedStyle(c[2]).getPropertyValue("z-index"),n=getComputedStyle(c[3]).getPropertyValue("z-index");c=document.querySelectorAll(".box")[e],c.style.cursor="grab",c.style.boxShadow="none",c.style.transform="rotateX(0) rotateY(0)",document.getElementById("demo").innerHTML="Box number : 0, have index of: "+t,document.getElementById("demo2").innerHTML="Box number : 1, have index of: "+o,document.getElementById("demo3").innerHTML="Box number : 2, have index of: "+l,document.getElementById("demo4").innerHTML="Box number : 3, have index of: "+n,window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",m);const r=parseInt(getComputedStyle(c).getPropertyValue("top")),a=parseInt(getComputedStyle(c).getPropertyValue("left")),s=document.querySelector(".container"),i=parseInt(getComputedStyle(c).getPropertyValue("width")),p=parseInt(getComputedStyle(c).getPropertyValue("height")),u=parseInt(getComputedStyle(s).getPropertyValue("height")),g=parseInt(getComputedStyle(s).getPropertyValue("width"));return r<0&&a>g-i?(c.style.top="0",c.style.left=g-i+"px",localStorage.setItem(`top${e}`,"0"),localStorage.setItem(`left${e}`,g-i+"px"),void localStorage.setItem("container",s.innerHTML)):r>u-p&&a<0?(c.style.top=u-p+"px",c.style.left="0",localStorage.setItem(`top${e}`,u-p+"px"),localStorage.setItem(`left${e}`,"0"),void localStorage.setItem("container",s.innerHTML)):r>u-p&&a>g-i?(c.style.top=u-p+"px",c.style.left=g-i+"px",localStorage.setItem(`top${e}`,u-p+"px"),localStorage.setItem(`left${e}`,g-i+"px"),void localStorage.setItem("container",s.innerHTML)):r<0&&a<0?(c.style.top="0",c.style.left="0",localStorage.setItem(`top${e}`,"0"),localStorage.setItem(`left${e}`,"0"),void localStorage.setItem("container",s.innerHTML)):r<0?(c.style.top="0",localStorage.setItem(`top${e}`,"0"),void localStorage.setItem("container",s.innerHTML)):a<0?(c.style.left="0",localStorage.setItem(`left${e}`,"0"),void localStorage.setItem("container",s.innerHTML)):r>u-p?(c.style.top=u-p+"px",localStorage.setItem(`top${e}`,u-p+"px"),void localStorage.setItem("container",s.innerHTML)):a>g-i?(c.style.left=g-i+"px",localStorage.setItem(`left${e}`,g-i+"px"),void localStorage.setItem("container",s.innerHTML)):void localStorage.setItem("container",s.innerHTML)}c.addEventListener("mousedown",i)}}()})();