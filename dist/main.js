(()=>{"use strict";let e,t;function o(o,n,l){if(t=o,e&&t){const o=1.5*Math.floor(t.screenX-e.screenX),r=-1.5*Math.floor(t.screenY-e.screenY);o<25&&o>-25&&r<25&&r>-25&&(n.style.transform=`rotateX(${r/l}deg) rotateY(${o/l}deg)`)}e=t}let n=document.querySelectorAll(".box");function l(e){for(let t=0;t<n.length;t++){const o=parseInt(getComputedStyle(e).getPropertyValue("top")),n=parseInt(getComputedStyle(e).getPropertyValue("left")),l=document.querySelector(".container"),r=parseInt(getComputedStyle(e).getPropertyValue("width")),s=parseInt(getComputedStyle(e).getPropertyValue("height")),d=parseInt(getComputedStyle(l).getPropertyValue("height")),a=parseInt(getComputedStyle(l).getPropertyValue("width"));if(o<0&&n>a-r)return e.style.top="0",e.style.left=a-r+"px",localStorage.setItem(`top${t}`,"0"),localStorage.setItem(`left${t}`,a-r+"px"),void localStorage.setItem("container",l.innerHTML);if(o>d-s&&n<0)return e.style.top=d-s+"px",e.style.left="0",localStorage.setItem(`top${t}`,d-s+"px"),localStorage.setItem(`left${t}`,"0"),void localStorage.setItem("container",l.innerHTML);if(o>d-s&&n>a-r)return e.style.top=d-s+"px",e.style.left=a-r+"px",localStorage.setItem(`top${t}`,d-s+"px"),localStorage.setItem(`left${t}`,a-r+"px"),void localStorage.setItem("container",l.innerHTML);if(o<0&&n<0)return e.style.top="0",e.style.left="0",localStorage.setItem(`top${t}`,"0"),localStorage.setItem(`left${t}`,"0"),void localStorage.setItem("container",l.innerHTML);if(o<0)return e.style.top="0",localStorage.setItem(`top${t}`,"0"),void localStorage.setItem("container",l.innerHTML);if(n<0)return e.style.left="0",localStorage.setItem(`left${t}`,"0"),void localStorage.setItem("container",l.innerHTML);if(o>d-s)return e.style.top=d-s+"px",localStorage.setItem(`top${t}`,d-s+"px"),void localStorage.setItem("container",l.innerHTML);if(n>a-r)return e.style.left=a-r+"px",localStorage.setItem(`left${t}`,a-r+"px"),void localStorage.setItem("container",l.innerHTML);localStorage.setItem("container",l.innerHTML)}}let r,s,d,a,i,u,c,m=document.getElementById("btn"),g=0,p=document.querySelector(".grab-container"),y=document.querySelectorAll(".box");function f(e,t,o){e.preventDefault(),document.execCommand(t,!1,o)}document.getElementById("btn").addEventListener("mousedown",(function(){function e(){p.classList.remove("slide-left"),r=!0,function(e){let t,n,r,s,d,a,i,u;const c=document.createElement("div");c.classList.add("box"),c.style.opacity="0",c.style.zIndex="100",container.appendChild(c);let m=document.querySelectorAll(".box"),g=m[m.length-1];g.setAttribute("data-min-rows",2),g.setAttribute("placeholder","type here..."),g.setAttribute("contenteditable",""),g.setAttribute("Spellcheck",!1),g.style.resize="both",t=e.clientX,n=e.clientY;const p=document.getElementById("btn"),y=parseInt(p.getBoundingClientRect().left),f=parseInt(p.getBoundingClientRect().top),v=parseInt(getComputedStyle(document.getElementById("btn")).getPropertyValue("top")),x=parseInt(getComputedStyle(document.getElementById("btn")).getPropertyValue("left"));function S(e){g.style.cursor="grabbing",g.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)",g.style.opacity="1",window.addEventListener("mouseup",I);let l=e.clientX-(t-r),d=e.clientY-(n-s);g.style.left=`${l}px`,g.style.top=`${d}px`,o(e,g,1.3)}function I(){g.style.cursor="default",g.style.boxShadow="none",g.style.transform="rotateX(0) rotateY(0)";const e=document.querySelector("#btn");e.style.backgroundColor="#f0f0f0",e.addEventListener("mouseenter",(()=>{e.style.backgroundColor="rgb(219, 224, 230)"})),e.addEventListener("mouseleave",(()=>{e.style.backgroundColor="#f0f0f0"})),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",I),l(g)}g.style.left=x-86+"px",g.style.top=`${v}px`,r=Math.floor(y-60),s=Math.floor(f-25),window.addEventListener("mousemove",S);for(let w=0;w<document.querySelectorAll(".box").length;w++){let E=document.querySelectorAll(".box")[w];function h(e){E=document.querySelectorAll(".box")[w];let o=parseInt(getComputedStyle(E).getPropertyValue("z-index")),l=parseInt(getComputedStyle(E).getPropertyValue("width")),d=parseInt(getComputedStyle(E).getPropertyValue("height"));if(r=Math.floor(E.getBoundingClientRect().left),s=Math.floor(E.getBoundingClientRect().top),t=e.clientX,n=e.clientY,t-r<l-2||n-s<d-2){e.preventDefault(),i=[];for(let e=0;e<document.querySelectorAll(".box").length;e++)o=parseInt(getComputedStyle(document.querySelectorAll(".box")[e]).getPropertyValue("z-index")),i.push(o);let t=Math.max(...i);if(t<100)E.style.zIndex=t+1,localStorage.setItem(`index${w}`,t);else for(let e=0;e<document.querySelectorAll(".box").length;e++)localStorage.setItem(`index${e}`,localStorage.getItem(`index${e}`)-10),document.querySelectorAll(".box")[e].style.zIndex=localStorage.getItem(`index${e}`);E.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)",window.addEventListener("mousemove",L),window.addEventListener("mouseup",b)}}function L(e){E=document.querySelectorAll(".box")[w],u=!0,E.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)";let o=e.clientX-(t-r),l=e.clientY-(n-s);E.style.left=`${o}px`,E.style.top=`${l}px`,localStorage.setItem(`top${[w]}`,l+"px"),localStorage.setItem(`left${[w]}`,o+"px"),function(){if(a=e,d&&a){const e=1.5*Math.floor(a.screenX-d.screenX),t=-1.5*Math.floor(a.screenY-d.screenY);e<25&&e>-25&&t<25&&t>-25&&(E.style.transform=`rotateX(${t/1.3}deg) rotateY(${e/1.3}deg)`)}d=a}()}function b(){1!=u&&E.focus(),u=!1,E=document.querySelectorAll(".box"),E=document.querySelectorAll(".box")[w],E.style.boxShadow="none",E.style.transform="rotateX(0) rotateY(0)",window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",b),l(E)}E.addEventListener("mousedown",h),E.addEventListener("mousedown",h),E.addEventListener("keydown",(()=>{E.style.height="auto"})),E.addEventListener("focus",(()=>{E.removeEventListener("mousedown",h),E.style.cursor="text"})),E.addEventListener("blur",(()=>{E.addEventListener("mousedown",h),E.style.cursor="default"}))}}(event),g=0,m.removeEventListener("mousemove",e)}m.addEventListener("mousemove",e),m.addEventListener("mouseup",(function(){function e(){p.classList.remove("slide-left"),window.removeEventListener("click",e)}p.classList.add("slide-left"),setTimeout((()=>{p.classList.remove("slide-left")}),5e3),setTimeout((()=>{window.addEventListener("click",e)}),0)})),window.addEventListener("mouseup",(function t(){r||m.removeEventListener("mousemove",e),r=!1,window.removeEventListener("mouseup",t)}))})),document.getElementById("bold").addEventListener("mousedown",(()=>f(event,"bold"))),document.getElementById("h1").addEventListener("mousedown",(()=>f(event,"formatBlock","h1"))),document.getElementById("h3").addEventListener("mousedown",(()=>f(event,"formatBlock","h3"))),document.getElementById("paragraph").addEventListener("mousedown",(()=>f(event,"insertParagraph"))),document.getElementById("italic").addEventListener("mousedown",(()=>f(event,"italic"))),document.getElementById("align-right").addEventListener("mousedown",(()=>f(event,"justifyRight"))),document.getElementById("align-center").addEventListener("mousedown",(()=>f(event,"justifyCenter"))),document.getElementById("align-left").addEventListener("mousedown",(()=>f(event,"justifyLeft"))),document.getElementById("align-full").addEventListener("mousedown",(()=>f(event,"justifyFull"))),document.getElementById("ul").addEventListener("mousedown",(()=>f(event,"insertUnorderedList"))),document.getElementById("ol").addEventListener("mousedown",(()=>f(event,"insertOrderedList"))),function(){for(let e=0;e<y.length;e++){let t=document.querySelectorAll(".box")[e];function n(o){t.style.resize="both";let n=parseInt(getComputedStyle(t).getPropertyValue("z-index")),l=parseInt(getComputedStyle(t).getPropertyValue("width")),c=parseInt(getComputedStyle(t).getPropertyValue("height"));if(a=Math.floor(t.getBoundingClientRect().left),i=Math.floor(t.getBoundingClientRect().top),s=o.clientX,d=o.clientY,s-a<l-2||d-i<c-2){o.preventDefault(),u=[];for(let e=0;e<document.querySelectorAll(".box").length;e++)n=parseInt(getComputedStyle(document.querySelectorAll(".box")[e]).getPropertyValue("z-index")),u.push(n);console.groupCollapsed,console.log("X axis: ",s-a),console.log("Y axis: ",d-a),console.log("the width: ",l-10),console.groupEnd;let i=Math.max(...u);if(i<100)t.style.zIndex=i+1,localStorage.setItem(`index${e}`,i);else for(let e=0;e<document.querySelectorAll(".box").length;e++)localStorage.setItem(`index${e}`,localStorage.getItem(`index${e}`)-10),document.querySelectorAll(".box")[e].style.zIndex=localStorage.getItem(`index${e}`);window.addEventListener("mousemove",r),window.addEventListener("mouseup",m)}}function r(n){c=!0,t.style.boxShadow="0 30px 50px 0 rgba(0, 0, 0, 0.19)";const l=n.clientX-(s-a),r=n.clientY-(d-i);t.style.left=`${l}px`,t.style.top=`${r}px`,localStorage.setItem(`top${[e]}`,r+"px"),localStorage.setItem(`left${[e]}`,l+"px"),o(n,t,1.3)}function m(){1!=c&&t.focus(),c=!1,t.style.boxShadow="none",t.style.transform="rotateX(0) rotateY(0)",window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",m),l(t)}t.addEventListener("mousedown",n),t.addEventListener("keydown",(()=>{t.style.height="auto"})),t.addEventListener("focus",(()=>{t.removeEventListener("mousedown",n),t.style.cursor="text"})),t.addEventListener("blur",(()=>{t.addEventListener("mousedown",n),t.style.cursor="default"}))}}(),document.addEventListener("input",(function({target:e}){if(e.classList.contains("box")&&"TEXTAREA"!=!e.nodeName){var t,o=0|e.getAttribute("data-min-rows");!e._baseScrollHeight&&function(e){var t=e.value;e.value="",e._baseScrollHeight=e.scrollHeight,e.value=t}(e),e.rows=o,t=Math.ceil((e.scrollHeight-e._baseScrollHeight)/16),e.rows=o+t}}))})();