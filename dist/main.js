(()=>{"use strict";let e;function t(t,o){const n=t;if(e&&n){const t=1.3*Math.floor(n.screenX-e.screenX),s=-1.3*Math.floor(n.screenY-e.screenY);t<25&&t>-25&&s<25&&s>-25&&(o.style.transform=`rotateX(${s/1.3}deg) rotateY(${t/1.3}deg)`)}e=n}let o=document.querySelectorAll(".box");function n(e){for(let t=0;t<o.length;t++){const t=parseInt(getComputedStyle(e).getPropertyValue("top")),o=parseInt(getComputedStyle(e).getPropertyValue("left")),n=document.querySelector(".container"),s=parseInt(getComputedStyle(e).getPropertyValue("width")),r=parseInt(getComputedStyle(e).getPropertyValue("height")),l=parseInt(getComputedStyle(n).getPropertyValue("height")),i=parseInt(getComputedStyle(n).getPropertyValue("width"));if(t<0&&o>i-s)return e.style.top="0",e.style.left=i-s+"px",void localStorage.setItem("container",n.innerHTML);if(t>l-r&&o<0)return e.style.top=l-r+"px",e.style.left="0",void localStorage.setItem("container",n.innerHTML);if(t>l-r&&o>i-s)return e.style.top=l-r+"px",e.style.left=i-s+"px",void localStorage.setItem("container",n.innerHTML);if(t<0&&o<0)return e.style.top="0",e.style.left="0",void localStorage.setItem("container",n.innerHTML);if(t<0)return e.style.top="0",void localStorage.setItem("container",n.innerHTML);if(o<0)return e.style.left="0",void localStorage.setItem("container",n.innerHTML);if(t>l-r)return e.style.top=l-r+"px",void localStorage.setItem("container",n.innerHTML);if(o>i-s)return e.style.left=i-s+"px",void localStorage.setItem("container",n.innerHTML);localStorage.setItem("container",n.innerHTML)}}function s(e,t=document){return t.getElementById(e)}function r(e,t=document){return t.querySelector(e)}function l(e,t=document){return[...t.querySelectorAll(e)]}function i(e,t){return getComputedStyle(e).getPropertyValue(t)}function c(e,t){return parseInt(getComputedStyle(e).getPropertyValue(t))}function a(e,t,o){e.preventDefault(),document.execCommand(t,!1,o)}s("bold"),r(".fa-bold");let d,u,m,p,f,g,y,v=[];function h(){null!=sessionStorage.getItem("before")&&(v=JSON.parse(sessionStorage.getItem("before"))),v.unshift(s("container").innerHTML),sessionStorage.setItem("before",JSON.stringify(v)),sessionStorage.setItem("moved","moved"),s("redo").style.opacity="0.5",s("undo").style.opacity="1"}let b=!1;function x(e,o=".box"){function s(t){if(t.altKey&&t.ctrlKey)return;if("true"==e.getAttribute("data-lock"))return;const n=t.shiftKey,s=c(e,"width"),a=c(e,"height");if(m=Math.floor(e.getBoundingClientRect().left),p=Math.floor(e.getBoundingClientRect().top),d=t.clientX,u=t.clientY,f=[],d-m<s+20||u-p<a+20){t.preventDefault();for(let e=0;e<l(o).length;e++)y=c(l(o)[e],"z-index"),f.push(y);g=Math.max(...f),localStorage.setItem("max",g),n||(e.style.zIndex=g+1),window.addEventListener("mousemove",r),window.addEventListener("mouseup",i)}}function r(o){b=!0,e.style.boxShadow="0 30px 50px 0 var(--shadow)";const n=o.clientX-(d-m),s=o.clientY-(u-p);e.style.left=`${n}px`,e.style.top=`${s}px`,t(o,e)}function i(){e.style.boxShadow="none",e.style.transform="rotateX(0) rotateY(0)",0==b?(container.style.userSelect="auto",e.setAttribute("contenteditable",""),e.focus(),e.classList.add("selected")):(e.setAttribute("contenteditable","false"),h()),b=!1,window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",i),n(e)}e.addEventListener("mousedown",s),e.addEventListener("keydown",(()=>{e.style.height="auto"})),e.addEventListener("focus",(()=>{e.removeEventListener("mousedown",s),e.style.cursor="text"})),e.addEventListener("blur",(()=>{e.addEventListener("mousedown",s),e.style.cursor="default"}))}const E="https://note-app-server-production.up.railway.app/";const L=document.getElementById("undo"),k=document.getElementById("redo"),S=document.getElementById("container");let w,I=[];function C(){const e=JSON.parse(sessionStorage.getItem("before")),t=new B("context-menu",".box"),o=e.slice(0,e.length);k.style.opacity="1",o.length<=1?L.style.opacity="0.5":("moved"==sessionStorage.getItem("moved")&&(I=[],sessionStorage.setItem("moved","not-moved")),I.unshift(o[0]),o.shift(),S.innerHTML=o[0],sessionStorage.setItem("before",JSON.stringify(o)),t.refreshEvent(),l(".box").forEach((e=>{x(e)})),o.length<=1&&(L.style.opacity="0.5"))}function A(){if("moved"==sessionStorage.getItem("moved"))return;const e=new B("context-menu",".box"),t=JSON.parse(sessionStorage.getItem("before")),o=t.slice(0,t.length);L.style.opacity="1",I.length<=0?k.style.opacity="0.5":(S.innerHTML=I[0],o.unshift(I[0]),I.shift(),sessionStorage.setItem("before",JSON.stringify(o)),e.refreshEvent(),l(".box").forEach((e=>{x(e)})),I.length<=0&&(k.style.opacity="0.5"))}function T(e,t){e.addEventListener("contextmenu",(e=>{e.preventDefault();const o=e.clientX,n=e.clientY;t.style.top=n+"px",t.style.left=o+"px",t.style.display="block"}))}class B{constructor(e,t){this.menu=s(e),this.card=l(t),this.cardName=t,this.prevEvent,this.rightBox=function(e){e.preventDefault(),document.activeElement.blur(),e.currentTarget.classList.add("selected");const t=e.clientX,o=e.clientY;this.menu.style.top=o+"px",this.menu.style.left=t+"px",this.menu.style.display="block",this.select=e.target,this.selectBox=e.currentTarget},this.clickRight=this.rightBox.bind(this)}}B.prototype.addContext=function(e){const t=e.target.className.split(" ")[1];if("delete"==e.target.id||"side-delete"==t)this.removeSelected();else if("copy"==e.target.id){e.preventDefault();const t=[];l(".selected").forEach((e=>{t.push(e.cloneNode(!0))})),this.copiedText=t}else if("paste"==e.target.id)this.paste(e),this.refreshEvent();else if("lock"==e.target.id)e.preventDefault(),l(".selected").forEach((e=>{"true"==e.getAttribute("data-lock")&&e.classList.remove("selected"),e.setAttribute("contenteditable",!1),e.setAttribute("data-lock",!0)})),localStorage.setItem("container",container.innerHTML),h();else if("unlock"==e.target.id)e.preventDefault(),l(".selected").forEach((e=>{"true"==e.getAttribute("data-lock")&&e.classList.add("selected"),e.setAttribute("contenteditable",!0),e.setAttribute("data-lock",!1)}));else if("side-copy"==t){e.preventDefault();const t=[];l(".selected").forEach((e=>{t.push(e.cloneNode(!0))})),this.copiedText=t}else"side-delete"==t&&(e.preventDefault(),this.removeSelected());this.menu.style.display="none"},B.prototype.pasteKey=function(){const e=[];null!=this.copiedText&&(this.copiedText.forEach((t=>{r(".container").appendChild(t);let o=parseInt(getComputedStyle(t).getPropertyValue("top")),n=parseInt(getComputedStyle(t).getPropertyValue("left"));t.style.top=o+20+"px",t.style.left=n+20+"px",t.style.cursor="default",t.style.zIndex=c(t,"z-index")+1,T(t,this.menu),x(t),e.push(t.cloneNode(!0))})),this.copiedText=e,this.refreshEvent(),localStorage.setItem("container",document.getElementById("container").innerHTML),h())},B.prototype.shortCut=function(e){const t=e.ctrlKey,o=e.shiftKey,n=e.key;if("Delete"==n&&this.removeSelected(),t){if("a"!=n&&"A"!=n||(e.preventDefault(),l(".box").forEach((e=>{e.classList.add("selected")}))),"l"!=n&&"L"!=n||(e.preventDefault(),l(".selected").forEach((e=>{e.classList.remove("selected"),e.setAttribute("contenteditable",!1),e.setAttribute("data-lock",!0)}))),"BODY"!=document.activeElement.tagName)return;"z"!=n&&"Z"!=n||C(),"y"!=n&&"Y"!=n||A()}if(t&&o){if("C"==n||"c"==n){e.preventDefault();const t=[];l(".selected").forEach((e=>{t.push(e.cloneNode(!0))})),this.copiedText=t}"V"!=n&&"v"!=n||(e.preventDefault(),this.pasteKey()),("l"==n||"L"==n)&&(e.preventDefault(),l(".box").forEach((e=>{"true"==e.getAttribute("data-lock")&&e.classList.add("selected"),e.setAttribute("data-lock",!1)})))}l(".selected").forEach((t=>{if("true"!=t.getAttribute("data-lock")){if("ArrowUp"==n){const t=l(".selected");t.length>1&&(e.preventDefault(),t.forEach((e=>{const t=parseInt(getComputedStyle(e).getPropertyValue("top"));e.style.top=t-5+"px"})))}if("ArrowDown"==n){const t=l(".selected");t.length>1&&(e.preventDefault(),t.forEach((e=>{const t=parseInt(getComputedStyle(e).getPropertyValue("top"));e.style.top=t+5+"px"})))}if("ArrowLeft"==n){const t=l(".selected");t.length>1&&(e.preventDefault(),t.forEach((e=>{const t=parseInt(getComputedStyle(e).getPropertyValue("left"));e.style.left=t-5+"px"})))}if("ArrowRight"==n){const t=l(".selected");t.length>1&&(e.preventDefault(),t.forEach((e=>{const t=parseInt(getComputedStyle(e).getPropertyValue("left"));e.style.left=t+5+"px"})))}}}))},B.prototype.paste=function(e){if(this.copiedText.length>1)return this.pasteKey();if(this.copiedText=this.copiedText[0],null!=this.copiedText){w==this.copiedText&&(this.copiedText=w.cloneNode(!0)),r(".container").appendChild(this.copiedText);const t=e.clientX,o=e.clientY;this.copiedText.style.left=t-40+"px",this.copiedText.style.top=o-40+"px",this.copiedText.style.cursor="default",this.copiedText.style.zIndex=c(this.copiedText,"z-index")+1,T(this.copiedText,this.menu),w=this.copiedText,this.refreshEvent(),x(w)}localStorage.setItem("container",document.getElementById("container").innerHTML),h()},B.prototype.removeSelected=function(){l(".selected").forEach((e=>{e.remove()})),localStorage.setItem("container",document.getElementById("container").innerHTML),h()},B.prototype.refreshEvent=function(){l(".box").forEach((e=>{e.addEventListener("contextmenu",this.clickRight)}))},B.prototype.eventHandler=function(){document.addEventListener("mousedown",this.unselect),document.addEventListener("contextmenu",(e=>e.preventDefault())),document.addEventListener("mousedown",(e=>this.addContext(e))),document.activeElement.addEventListener("keydown",(e=>this.shortCut(e)))},B.prototype.unselect=function(e){const t=e.target.className.split(" ")[1],o=e.target.className.split(" ").filter((e=>"box"===e)),n=l(".selected"),s=e.shiftKey;if("box"==o||""==o)for(const o of n)o.classList.add("clicked"),"d-select-all"!=e.target.id&&"side-delete"!=t&&"d-delete"!=e.target.id&&"delete"!=e.target.id&&(s||"copy"==e.target.id||"lock"!=e.target.id&&"unlock"!=e.target.id&&"side-copy"!=t&&o.classList.remove("selected"))};const N=new B("context-menu",".box"),D=s("container");let M,P=[],R=document.getElementById("btn"),H=0,q=document.querySelector(".grab-container");class Y{constructor(e,t,o){this.menu=s(e),this.card=l(t),this.cardName=t,this.contextMenu=o,this.prevEvent,this.rightBox=e=>{if("container"==e.target.className){e.preventDefault();const t=e.clientX,o=e.clientY;this.menu.style.top=o+"px",this.menu.style.left=t+"px",this.menu.style.display="block",this.select=e.target}},this.clickRight=this.rightBox.bind(this)}docRightClick(){document.addEventListener("contextmenu",this.clickRight)}}function V(){document.body.requestFullscreen?document.body.requestFullscreen():document.body.webkitRequestFullscreen?document.body.webkitRequestFullscreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen()}Y.prototype.selectAll=function(){this.card=l(".box"),this.card.forEach((e=>{e.classList.add("selected")}))},Y.prototype.addContext=function(){document.addEventListener("mousedown",(e=>{"d-paste"==e.target.id&&this.contextMenu.paste(e),"d-select-all"==e.target.id&&this.selectAll(e),"d-delete"==e.target.id&&this.contextMenu.removeSelected(),"context-undo"==e.target.id&&C(),"context-redo"==e.target.id&&A(),"unlock-all"==e.target.id&&(l(".box").forEach((e=>{e.setAttribute("data-lock",!1)})),localStorage.setItem("container",container.innerHTML)),"save"==e.target.id&&e.preventDefault(),"load"==e.target.id&&e.preventDefault(),this.menu.style.display="none"}),!1)};const X=document.getSelection(),O=r(".bold"),F=r(".italic"),j=s("paragraph"),z=r(".fa-bold"),K=r(".fa-italic"),J=r(".fa-p");function $(e){let t=[];for(let e=0;e<X.rangeCount;e++)t[e]=X.getRangeAt(e);if(null==t[0])return;if("container"==e.target.id)return O.classList.remove("dark-back"),z.classList.remove("dark-color"),F.classList.remove("dark-back"),K.classList.remove("dark-color"),j.classList.remove("dark-back"),void J.classList.remove("dark-color");const o=[t[0].endContainer.parentNode.nodeName,t[0].endContainer.parentNode.parentNode.nodeName,t[0].endContainer.parentNode.parentNode.parentNode.nodeName],n=["B","I","P"],s=[[O,z],[F,K],[j,J]];for(const e in n)for(const t in o){if(o[t]==n[e]){s[e][0].classList.add("dark-back"),s[e][1].classList.add("dark-color");break}s[e][0].classList.remove("dark-back"),s[e][1].classList.remove("dark-color")}}const U=s("btn"),W=s("to-pdf");U.addEventListener("mousedown",(function(){function e(){q.classList.remove("slide-left"),M=!0,function(e){let o,r,l,i;const c=document.createElement("div");c.classList.add("box"),c.style.opacity="0",c.style.zIndex=localStorage.getItem("max")+1,D.appendChild(c);let a=document.querySelectorAll(".box"),d=a[a.length-1];d.setAttribute("placeholder","type here..."),d.setAttribute("Spellcheck",!1),d.style.resize="both",o=e.clientX,r=e.clientY;const u=document.getElementById("btn"),m=parseInt(u.getBoundingClientRect().left),p=parseInt(u.getBoundingClientRect().top),f=parseInt(getComputedStyle(document.getElementById("btn")).getPropertyValue("top")),g=parseInt(getComputedStyle(document.getElementById("btn")).getPropertyValue("left"));function y(e){d.style.cursor="grabbing",d.style.boxShadow="0 30px 50px 0 var(--shadow)",d.style.opacity="1",window.addEventListener("mouseup",v);let n=e.clientX-(o-l),s=e.clientY-(r-i);d.style.left=`${n}px`,d.style.top=`${s}px`,t(e,d)}function v(){d.style.cursor="default",d.style.boxShadow="none",d.style.transform="rotateX(0) rotateY(0)",window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",v),null!=sessionStorage.getItem("before")&&(P=JSON.parse(sessionStorage.getItem("before"))),P.unshift(s("container").innerHTML),sessionStorage.setItem("before",JSON.stringify(P)),sessionStorage.setItem("after","moved"),s("redo").style.opacity="0.5",s("undo").style.opacity="1",N.refreshEvent(),n(d)}d.style.left=g-86+"px",d.style.top=`${f}px`,l=Math.floor(m-60),i=Math.floor(p-25),window.addEventListener("mousemove",y),x(d)}(event),H=0,R.removeEventListener("mousemove",e)}R.addEventListener("mousemove",e),R.addEventListener("mouseup",(function(){function e(){q.classList.remove("slide-left"),window.removeEventListener("click",e)}q.classList.add("slide-left"),setTimeout((()=>{q.classList.remove("slide-left")}),5e3),setTimeout((()=>{window.addEventListener("click",e)}),0)})),window.addEventListener("mouseup",(function t(){M||R.removeEventListener("mousemove",e),M=!1,window.removeEventListener("mouseup",t)}))})),W.addEventListener("click",(function(){document.getElementById("download-pdf").style.opacity="0.5",document.querySelector(".fa-file-arrow-down").style.opacity="0.5",document.querySelector(".loader-fix").style.display="inline-block";let e="a3",t=5;window.innerWidth>=1550&&(e="a2",t=7),window.innerWidth>=2400&&(e="a1",t=9);const o=document.getElementById("container"),n={margin:1,filename:"myfile.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:t},jsPDF:{unit:"in",format:e,orientation:"landscape"}};html2pdf().set(n).from(o).save().then((()=>{document.getElementById("download-pdf").style.opacity="1",document.querySelector(".fa-file-arrow-down").style.opacity="1",document.querySelector(".loader-fix").style.display="none"}))})),container.addEventListener("keyup",$),container.addEventListener("click",$),document.onkeyup=()=>{localStorage.setItem("container",s("container").innerHTML)};const _=document.getElementById("link"),G=s("image"),Z=r(".add-link-pop"),Q=r(".image"),ee=document.getElementById("input-link"),te=document.getElementById("input-image"),oe=document.getElementById("add-link-btn"),ne=document.getElementById("add-image-btn"),se=document.getSelection(),re=l(".box"),le=document.getElementsByTagName("A"),ie=document.getElementsByTagName("IMG");let ce,ae=[];function de(e){e.preventDefault()}_.addEventListener("mousedown",(function(e){e.preventDefault();for(let e=0;e<se.rangeCount;e++)ae[e]=se.getRangeAt(e);Z.classList.toggle("unhide")})),G.addEventListener("mousedown",(function(e){e.preventDefault();for(let e=0;e<se.rangeCount;e++)ae[e]=se.getRangeAt(e);Q.classList.toggle("unhide")})),oe.addEventListener("mousedown",(function(e){e.preventDefault(),se.removeAllRanges(),se.addRange(ae[0]);let t=ee.value;/^https:\/\//.test(ee.value)||/^http:\/\//.test(ee.value)||(t="https://"+ee.value),document.execCommand("createLink",!1,t);for(const e of le)e.setAttribute("title","Ctrl +  Alt + click to open");ee.value=""})),ne.addEventListener("mousedown",(function(e){e.preventDefault(),se.removeAllRanges(),se.addRange(ae[0]),document.execCommand("insertImage",!1,te.value);for(const e of ie)""==e.id&&(e.style.width="100%",e.style.borderRadius="5px",e.style.objectFit="contain");te.value=""})),document.addEventListener("keydown",(e=>{const t=e.ctrlKey;e.altKey&&t&&(ce=document.activeElement,re.forEach((e=>{e.setAttribute("contenteditable",!1)})),le.forEach((e=>{e.style.cursor="pointer",e.removeEventListener("click",de)})))})),document.addEventListener("keyup",(e=>{le.forEach((e=>{e.style.cursor="default",e.addEventListener("click",de)})),null!=ce&&"BODY"!=document.activeElement.tagName&&(re.forEach((e=>{e.setAttribute("contenteditable",!0)})),ce.focus())})),le.forEach((e=>{e.style.cursor="default",e.addEventListener("click",de)}));const ue=s("bg-color");let me=[];ue.addEventListener("click",(function(e){e.preventDefault();for(let e=0;e<se.rangeCount;e++)me[e]=se.getRangeAt(e)}));const pe=s("col-inp-back");pe.addEventListener("change",(function(){null!=me[0]&&(se.removeAllRanges(),se.addRange(me[0]),document.execCommand("backColor",!1,pe.value),document.execCommand("foreColor",!1,"#ffffff"))})),s("color").addEventListener("click",(function(e){e.preventDefault();for(let e=0;e<se.rangeCount;e++)me[e]=se.getRangeAt(e)}));const fe=s("col-inp");fe.addEventListener("change",(function(){null!=me[0]&&(se.removeAllRanges(),se.addRange(me[0]),document.execCommand("foreColor",!1,fe.value))}));const ge=new B("context-menu",".box");ge.refreshEvent(),ge.eventHandler();const ye=new Y("document-context-menu","document-menu",ge);ye.docRightClick(),ye.addContext(),l(".box").forEach((e=>{x(e)})),function(){s("bold").addEventListener("mousedown",(()=>{r(".bold").classList.toggle("dark-back"),r(".fa-bold").classList.toggle("dark-color"),a(event,"bold")})),s("italic").addEventListener("mousedown",(()=>{r(".italic").classList.toggle("dark-back"),r(".fa-italic").classList.toggle("dark-color"),a(event,"italic")})),s("paragraph").addEventListener("mousedown",(()=>{a(event,"formatBlock","p"),r(".paragraph").classList.toggle("dark-back"),r(".fa-p").classList.toggle("dark-color")})),l("#save > div p").forEach(((e,t)=>{const o=t+1;e.addEventListener("mousedown",(()=>{alert("saved"),async function(e,t,o){const n={uid:e,content:t,room:o},s={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)};await fetch(E+"update_db",s),localStorage.setItem("container",container.innerHTML)}(localStorage.getItem("uid"),container.innerHTML,o)}))})),l("#load > div p").forEach(((e,t)=>{const o=t+1;e.addEventListener("mousedown",(()=>{container.style.opacity="0.8",container.style.filter="blur(1px)",async function(e,t){const o=new B("context-menu",".box"),n={uid:e,room:t},s={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)},r=await fetch(E+"get_db",s),l=await r.json();if(null==l["room"+t])return container.innerHTML="",container.style.opacity="1",container.style.filter="blur(0)",void localStorage.setItem("container",container.innerHTML);container.innerHTML=l["room"+t],container.style.opacity="1",container.style.filter="blur(0)",localStorage.setItem("container",container.innerHTML),o.refreshEvent(),document.querySelectorAll(".box").forEach((e=>{x(e)}))}(localStorage.getItem("uid"),o)}))}));const e=s("expand-container");s("expand").addEventListener("click",V),e.addEventListener("click",V),s("h1").addEventListener("mousedown",(()=>a(event,"formatBlock","h1"))),document.querySelector(".h3").addEventListener("mousedown",(()=>a(event,"formatBlock","h3"))),s("align-right").addEventListener("mousedown",(()=>a(event,"justifyRight"))),s("align-center").addEventListener("mousedown",(()=>a(event,"justifyCenter"))),s("align-left").addEventListener("mousedown",(()=>a(event,"justifyLeft"))),s("align-full").addEventListener("mousedown",(()=>a(event,"justifyFull"))),s("ul").addEventListener("mousedown",(()=>a(event,"insertUnorderedList"))),s("ol").addEventListener("mousedown",(()=>a(event,"insertOrderedList")));const t=document.getElementById("undo"),o=document.getElementById("redo");t.addEventListener("click",C),o.addEventListener("click",A)}(),function(){const e=e=>`#${e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/).slice(1).map((e=>parseInt(e,10).toString(16).padStart(2,"0"))).join("")}`,t=r(".color-palette-bg"),o=s("bg-color"),n=(o.getBoundingClientRect().left,l(".color-item-bg"));o.addEventListener("click",(()=>t.style.display="grid")),document.addEventListener("click",(function(e){const o=e.target,n=o.className.split(" ")[1],s=o.className.split(" ")[0];"color-palette-bg"!=o.className&&"color-item-bg"!=n&&"bg-color"!=o.id&&"text-back-color"!=o.alt&&"color-input"!=s&&(t.style.display="none")})),n.forEach((t=>{const o=i(t,"background-color");t.addEventListener("mousedown",(n=>{n.preventDefault(),"true"!=t.getAttribute("data-clear")?(document.execCommand("backColor",!1,e(o)),"#e1e54a"!=e(o)?document.execCommand("foreColor",!1,"#ffffff"):document.execCommand("foreColor",!1,"#dd5845")):document.execCommand("removeFormat",!1)}))}));const c=r(".color-palette"),a=s("color"),d=l(".color-item"),u=r(".add-link-pop"),m=r(".image");a.addEventListener("click",(()=>c.style.display="grid")),document.addEventListener("click",(function(e){const t=e.target,o=t.className.split(" ")[1];"color-palette"!=t.className&&"color-item"!=o&&"color"!=t.id&&"text-color"!=t.alt&&(c.style.display="none"),"link"!=t.id&&"fa-link"!=o&&t!==u&&"input-link"!=t.id&&u.classList.remove("unhide"),"image"!=t.id&&"fa-image"!=o&&t!=m&&"input-image"!=t.id&&m.classList.remove("unhide")})),d.forEach((t=>{const o=i(t,"background-color");t.addEventListener("mousedown",(n=>{n.preventDefault(),"true"!=t.getAttribute("data-clear")?document.execCommand("foreColor",!1,e(o)):document.execCommand("removeFormat",!1)}))}))}(),function(){const e=r(".setting-container"),t=s("setting"),o=r(".setting-container"),n=r(".switch"),l=r(".switch-button"),i=r(":root"),c=s("add-btn"),a=s("text-color"),d=s("back-color"),u=s("h3"),m=s("ol-icon");r("hr");let p="true";function f(){if("false"==p)return l.classList.add("switch-button-on"),c.setAttribute("src","/src/asset/add-button-dark.svg"),a.setAttribute("src","/src/asset/text-color-dark.svg"),d.setAttribute("src","/src/asset/bg-color-dark.svg"),m.setAttribute("src","/src/asset/ol dark.svg"),u.setAttribute("src","/src/asset/h3-dark.svg"),null==localStorage.getItem("username")&&pPicture.setAttribute("src","/src/asset/profile-dark.svg"),i.style.setProperty("--dark-text","#ddd"),i.style.setProperty("--mid-text","#ccc"),i.style.setProperty("--back-color","#33373a"),i.style.setProperty("--normal-text","#aaa"),i.style.setProperty("--container-color","#212223"),i.style.setProperty("--box-border","rgba(255, 255, 255, 0.05)"),localStorage.setItem("clicked",p),void(p="true");"true"==p&&(l.classList.remove("switch-button-on"),c.setAttribute("src","/src/asset/add-button.svg"),a.setAttribute("src","/src/asset/text-color.svg"),d.setAttribute("src","/src/asset/back-color.svg"),u.setAttribute("src","/src/asset/h3.svg"),m.setAttribute("src","/src/asset/ol.svg"),null==localStorage.getItem("username")&&pPicture.setAttribute("src","/src/asset/profile-pic.svg"),i.style.setProperty("--dark-text","#4e6d89"),i.style.setProperty("--mid-text","#6c889e"),i.style.setProperty("--back-color","#f7f7f7"),i.style.setProperty("--normal-text","#8199aa"),i.style.setProperty("--container-color","#e1e7ee"),i.style.setProperty("--box-border","rgba(0, 0, 0, 0.102)"),localStorage.setItem("clicked",p),p="false")}e.onclick=e=>{"setting-container"!=e.target.className&&"close"!=e.target.id||(o.style.transform="translate(100%, 0)",o.style.opacity="0",o.style.backdropFilter="blur(0)")},t.onclick=()=>{o.style.transform="translate(0, 0)",o.style.opacity="1",o.style.backdropFilter="blur(2px)"},n.onclick=f,null!=localStorage.getItem("clicked")&&(p=localStorage.getItem("clicked")),f()}(),function(){const e=document.getElementById("select-drag");let t;function o(o){const n=o.clientX,r=o.clientY,l=e.getBoundingClientRect(),i=n-l.left,c=r-l.top;if(e.style.width=i+"px",e.style.height=c+"px",e.style.display="block",e.style.zIndex="999",n<t[0]){e.style.left=n+"px";const o=t[0]-n;e.style.width=o+"px"}if(r<t[1]){e.style.top=r+"px";const o=t[1]-r;e.style.height=o+"px"}document.querySelectorAll(".box").forEach((e=>{l.right>s(e)[0][0]&&l.bottom>s(e)[1][0]&&l.left<s(e)[0][1]&&l.top<s(e)[1][1]&&e.classList.add("selected"),(l.left>s(e)[0][1]||l.right<s(e)[0][0])&&e.classList.remove("selected"),(l.top>s(e)[1][1]||l.bottom<s(e)[1][0])&&e.classList.remove("selected")}))}function n(){const t=e.getBoundingClientRect();document.querySelectorAll(".box").forEach((e=>{t.right>s(e)[0][0]&&t.bottom>s(e)[1][0]?t.left<s(e)[0][1]&&t.top<s(e)[1][1]&&e.classList.add("selected"):e.blur()})),e.style.width="0",e.style.height="0",e.style.zIndex="-1",document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",n)}function s(e){let t=e.getBoundingClientRect();return[[t.left,t.right],[t.top,t.bottom]]}document.onmousedown=s=>{if("container"==s.target.className&&(t=[s.clientX,s.clientY],0===s.button)){const t=s.clientX,r=s.clientY;e.style.left=t+"px",e.style.top=r+"px",document.addEventListener("mousemove",o),document.addEventListener("mouseup",n)}}}(),h(),s("undo").style.opacity="0.5"})();